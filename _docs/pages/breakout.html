<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ–ãƒ­ãƒƒã‚¯å´©ã— - PowerShell ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</title>
    <link rel="stylesheet" href="../css/styles.css">
    <style>
        .game-container {
            text-align: center;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .start-screen {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            color: #333;
        }
        
        .start-screen h2 {
            font-size: 2.5em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            color: #ff6b9d;
        }
        
        .instructions {
            background: rgba(255,255,255,0.3);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .start-button {
            background: linear-gradient(45deg, #ff6b9d, #c44569);
            border: none;
            color: white;
            padding: 15px 40px;
            font-size: 1.2em;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        
        .start-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.3);
        }
        
        .game-canvas {
            border: 3px solid #ff9a9e;
            border-radius: 15px;
            background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
            display: none;
        }
        
        .game-ui {
            display: none;
            margin-top: 20px;
        }
        
        .score-display {
            background: linear-gradient(45deg, #ff9a9e, #fecfef);
            color: #333;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.2em;
            font-weight: bold;
            margin: 10px;
            display: inline-block;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255,154,158,0.95);
            color: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            display: none;
            backdrop-filter: blur(10px);
        }
        
        .restart-button {
            background: linear-gradient(45deg, #00b894, #00cec9);
            border: none;
            color: white;
            padding: 12px 30px;
            font-size: 1.1em;
            border-radius: 25px;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
        }
        
        .restart-button:hover {
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <div class="container">
        <nav class="breadcrumb">
            <a href="../index.html">ãƒ›ãƒ¼ãƒ </a> &gt; ãƒ–ãƒ­ãƒƒã‚¯å´©ã—
        </nav>
        
        <header>
            <h1>ğŸ¾ ãƒ–ãƒ­ãƒƒã‚¯å´©ã—</h1>
            <p>ãƒ‘ãƒ‰ãƒ«ã¨ãƒœãƒ¼ãƒ«ã§ãƒ–ãƒ­ãƒƒã‚¯ã‚’å£Šãã†ï¼</p>
            <button class="theme-toggle" onclick="toggleTheme()">ğŸŒ™</button>
        </header>
        
        <div class="search-container">
            <input type="text" id="searchInput" placeholder="ã‚²ãƒ¼ãƒ å†…ã‚’æ¤œç´¢..." onkeyup="filterContent()">
        </div>
        
        <div class="game-container">
            <div class="start-screen" id="startScreen">
                <h2>ğŸŒŸ ãƒ–ãƒ­ãƒƒã‚¯å´©ã— ğŸŒŸ</h2>
                <div class="instructions">
                    <h3>ğŸ® æ“ä½œæ–¹æ³•</h3>
                    <p><strong>â† â†’</strong> ã‚­ãƒ¼: ãƒ‘ãƒ‰ãƒ«ã‚’å·¦å³ã«ç§»å‹•</p>
                    <p><strong>ã‚¹ãƒšãƒ¼ã‚¹</strong> ã‚­ãƒ¼: ãƒœãƒ¼ãƒ«ã‚’ç™ºå°„</p>
                    <p><strong>P</strong> ã‚­ãƒ¼: ä¸€æ™‚åœæ­¢/å†é–‹</p>
                </div>
                <div class="instructions">
                    <h3>ğŸ¯ ã‚²ãƒ¼ãƒ ã®ç›®çš„</h3>
                    <p>ãƒ‘ãƒ‰ãƒ«ã§ãƒœãƒ¼ãƒ«ã‚’è·³ã­è¿”ã—ã¦ã€ä¸Šã«ã‚ã‚‹ãƒ–ãƒ­ãƒƒã‚¯ã‚’å…¨ã¦å£Šãã†ï¼</p>
                    <p>ãƒœãƒ¼ãƒ«ã‚’è½ã¨ã•ãªã„ã‚ˆã†ã«æ³¨æ„ã—ã¦ã€é«˜ã‚¹ã‚³ã‚¢ã‚’ç›®æŒ‡ãã†ï¼</p>
                </div>
                <button class="start-button" onclick="startGame()">ã‚²ãƒ¼ãƒ ã‚¹ã‚¿ãƒ¼ãƒˆï¼ ğŸ¾</button>
            </div>
            
            <canvas id="gameCanvas" class="game-canvas" width="800" height="600"></canvas>
            
            <div class="game-ui" id="gameUI">
                <div class="score-display">ã‚¹ã‚³ã‚¢: <span id="score">0</span></div>
                <div class="score-display">ãƒ©ã‚¤ãƒ•: <span id="lives">3</span></div>
                <div class="score-display">ãƒ¬ãƒ™ãƒ«: <span id="level">1</span></div>
            </div>
            
            <div class="game-over" id="gameOver">
                <h2>ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼</h2>
                <p>æœ€çµ‚ã‚¹ã‚³ã‚¢: <span id="finalScore">0</span></p>
                <button class="restart-button" onclick="restartGame()">ã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤</button>
                <button class="restart-button" onclick="showStartScreen()">ã‚¿ã‚¤ãƒˆãƒ«ã«æˆ»ã‚‹</button>
            </div>
        </div>
    </div>
    
    <footer>
        <p><a href="../index.html">ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹</a> | PowerShell ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ v1.0</p>
    </footer>
    
    <script src="../js/script.js"></script>
    <script>
        // ã‚²ãƒ¼ãƒ å¤‰æ•°
        let canvas, ctx;
        let gameRunning = false;
        let gamePaused = false;
        let score = 0;
        let lives = 3;
        let level = 1;
        
        // ãƒ‘ãƒ‰ãƒ«
        let paddle = {
            x: 350,
            y: 550,
            width: 100,
            height: 20,
            speed: 8
        };
        
        // ãƒœãƒ¼ãƒ«
        let ball = {
            x: 400,
            y: 530,
            radius: 8,
            dx: 4,
            dy: -4,
            speed: 4
        };
        
        // ãƒ–ãƒ­ãƒƒã‚¯
        let blocks = [];
        let blockRowCount = 5;
        let blockColumnCount = 10;
        let blockWidth = 70;
        let blockHeight = 20;
        let blockPadding = 8;
        let blockOffsetTop = 80;
        // ä¸­å¤®æƒãˆã®ãŸã‚ã®è¨ˆç®—: (800 - (70 * 10 + 8 * 9)) / 2 = 14
        let blockOffsetLeft = 14;
        
        // ã‚­ãƒ¼å…¥åŠ›
        let keys = {};
        let ballLaunched = false;
        
        // ã‚²ãƒ¼ãƒ é–‹å§‹
        function startGame() {
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('gameCanvas').style.display = 'block';
            document.getElementById('gameUI').style.display = 'block';
            
            canvas = document.getElementById('gameCanvas');
            ctx = canvas.getContext('2d');
            
            initGame();
            gameLoop();
        }
        
        // ã‚²ãƒ¼ãƒ åˆæœŸåŒ–
        function initGame() {
            gameRunning = true;
            score = 0;
            lives = 3;
            level = 1;
            ballLaunched = false;
            
            // ãƒ‘ãƒ‰ãƒ«åˆæœŸåŒ–
            paddle.x = 350;
            paddle.y = 550;
            
            // ãƒœãƒ¼ãƒ«åˆæœŸåŒ–
            ball.x = 400;
            ball.y = 530;
            ball.dx = 4;
            ball.dy = -4;
            
            // ãƒ–ãƒ­ãƒƒã‚¯åˆæœŸåŒ–
            initBlocks();
            
            // ã‚­ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆè¨­å®š
            document.addEventListener('keydown', handleKeyDown);
            document.addEventListener('keyup', handleKeyUp);
        }
        
        // ãƒ–ãƒ­ãƒƒã‚¯åˆæœŸåŒ–
        function initBlocks() {
            blocks = [];
            for (let c = 0; c < blockColumnCount; c++) {
                blocks[c] = [];
                for (let r = 0; r < blockRowCount; r++) {
                    blocks[c][r] = { x: 0, y: 0, status: 1 };
                }
            }
        }
        
        // ã‚­ãƒ¼æŠ¼ä¸‹å‡¦ç†
        function handleKeyDown(e) {
            keys[e.key] = true;
            
            if (e.key === ' ' && gameRunning && !gamePaused && !ballLaunched) {
                launchBall();
            }
            
            if (e.key === 'p' || e.key === 'P') {
                togglePause();
            }
        }
        
        // ã‚­ãƒ¼é›¢ä¸Šå‡¦ç†
        function handleKeyUp(e) {
            keys[e.key] = false;
        }
        
        // ãƒœãƒ¼ãƒ«ç™ºå°„
        function launchBall() {
            ballLaunched = true;
            ball.dx = ball.speed * (Math.random() > 0.5 ? 1 : -1);
            ball.dy = -ball.speed;
        }
        
        // ä¸€æ™‚åœæ­¢åˆ‡ã‚Šæ›¿ãˆ
        function togglePause() {
            gamePaused = !gamePaused;
        }
        
        // ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ—
        function gameLoop() {
            if (!gameRunning) return;
            
            if (!gamePaused) {
                updateGame();
            }
            
            drawGame();
            requestAnimationFrame(gameLoop);
        }
        
        // ã‚²ãƒ¼ãƒ æ›´æ–°
        function updateGame() {
            // ãƒ‘ãƒ‰ãƒ«ç§»å‹•
            if (keys['ArrowLeft'] && paddle.x > 0) {
                paddle.x -= paddle.speed;
            }
            if (keys['ArrowRight'] && paddle.x < canvas.width - paddle.width) {
                paddle.x += paddle.speed;
            }
            
            // ãƒœãƒ¼ãƒ«ç§»å‹•
            if (ballLaunched) {
                ball.x += ball.dx;
                ball.y += ball.dy;
                
                // å£ã¨ã®è¡çªåˆ¤å®š
                if (ball.x + ball.radius > canvas.width || ball.x - ball.radius < 0) {
                    ball.dx = -ball.dx;
                }
                if (ball.y - ball.radius < 0) {
                    ball.dy = -ball.dy;
                }
                
                // ãƒ‘ãƒ‰ãƒ«ã¨ã®è¡çªåˆ¤å®š
                if (ball.y + ball.radius > paddle.y && 
                    ball.x > paddle.x && 
                    ball.x < paddle.x + paddle.width) {
                    ball.dy = -ball.speed;
                    // ãƒ‘ãƒ‰ãƒ«ã®ä½ç½®ã«å¿œã˜ã¦ãƒœãƒ¼ãƒ«ã®è§’åº¦ã‚’èª¿æ•´
                    let hitPos = (ball.x - (paddle.x + paddle.width / 2)) / (paddle.width / 2);
                    ball.dx = hitPos * ball.speed;
                }
                
                // ãƒœãƒ¼ãƒ«ãŒä¸‹ã«è½ã¡ãŸå ´åˆ
                if (ball.y + ball.radius > canvas.height) {
                    lives--;
                    if (lives <= 0) {
                        gameOver();
                    } else {
                        resetBall();
                    }
                }
            } else {
                // ãƒœãƒ¼ãƒ«ãŒç™ºå°„ã•ã‚Œã¦ã„ãªã„å ´åˆã€ãƒ‘ãƒ‰ãƒ«ã«è¿½å¾“
                ball.x = paddle.x + paddle.width / 2;
                ball.y = paddle.y - ball.radius;
            }
            
            // ãƒ–ãƒ­ãƒƒã‚¯ã¨ã®è¡çªåˆ¤å®š
            checkBlockCollisions();
            
            // ãƒ¬ãƒ™ãƒ«ã‚¯ãƒªã‚¢åˆ¤å®š
            if (blocks.every(col => col.every(block => block.status === 0))) {
                levelUp();
            }
        }
        
        // ãƒ–ãƒ­ãƒƒã‚¯è¡çªåˆ¤å®š
        function checkBlockCollisions() {
            for (let c = 0; c < blockColumnCount; c++) {
                for (let r = 0; r < blockRowCount; r++) {
                    let b = blocks[c][r];
                    if (b.status === 1) {
                        if (ball.x > b.x && 
                            ball.x < b.x + blockWidth && 
                            ball.y > b.y && 
                            ball.y < b.y + blockHeight) {
                            ball.dy = -ball.dy;
                            b.status = 0;
                            score += 10;
                        }
                    }
                }
            }
        }
        
        // ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—
        function levelUp() {
            level++;
            ball.speed += 0.5;
            initBlocks();
            resetBall();
        }
        
        // ãƒœãƒ¼ãƒ«ãƒªã‚»ãƒƒãƒˆ
        function resetBall() {
            ball.x = paddle.x + paddle.width / 2;
            ball.y = paddle.y - ball.radius;
            ball.dx = 0;
            ball.dy = 0;
            ballLaunched = false;
        }
        
        // ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼
        function gameOver() {
            gameRunning = false;
            document.getElementById('finalScore').textContent = score;
            document.getElementById('gameOver').style.display = 'block';
        }
        
        // ã‚²ãƒ¼ãƒ æç”»
        function drawGame() {
            // èƒŒæ™¯ã‚¯ãƒªã‚¢
            ctx.fillStyle = '#667eea';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // èƒŒæ™¯ãƒ‘ã‚¿ãƒ¼ãƒ³æç”»
            drawBackground();
            
            // ãƒ‘ãƒ‰ãƒ«æç”»
            ctx.fillStyle = '#ff9a9e';
            ctx.fillRect(paddle.x, paddle.y, paddle.width, paddle.height);
            ctx.fillStyle = '#fecfef';
            ctx.fillRect(paddle.x + 2, paddle.y + 2, paddle.width - 4, paddle.height - 4);
            
            // ãƒœãƒ¼ãƒ«æç”»
            ctx.beginPath();
            ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
            ctx.fillStyle = '#ffff88';
            ctx.fill();
            ctx.strokeStyle = '#ffaa00';
            ctx.lineWidth = 2;
            ctx.stroke();
            
            // ãƒ–ãƒ­ãƒƒã‚¯æç”»
            drawBlocks();
            
            // UIæ›´æ–°
            document.getElementById('score').textContent = score;
            document.getElementById('lives').textContent = lives;
            document.getElementById('level').textContent = level;
        }
        
        // èƒŒæ™¯æç”»
        function drawBackground() {
            ctx.fillStyle = 'rgba(255,255,255,0.1)';
            for (let i = 0; i < 20; i++) {
                let x = Math.random() * canvas.width;
                let y = Math.random() * canvas.height;
                let size = Math.random() * 3 + 1;
                ctx.beginPath();
                ctx.arc(x, y, size, 0, Math.PI * 2);
                ctx.fill();
            }
        }
        
        // ãƒ–ãƒ­ãƒƒã‚¯æç”»
        function drawBlocks() {
            for (let c = 0; c < blockColumnCount; c++) {
                for (let r = 0; r < blockRowCount; r++) {
                    if (blocks[c][r].status === 1) {
                        let blockX = c * (blockWidth + blockPadding) + blockOffsetLeft;
                        let blockY = r * (blockHeight + blockPadding) + blockOffsetTop;
                        blocks[c][r].x = blockX;
                        blocks[c][r].y = blockY;
                        
                        // ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³åŠ¹æœ
                        let gradient = ctx.createLinearGradient(blockX, blockY, blockX, blockY + blockHeight);
                        gradient.addColorStop(0, '#ff9a9e');
                        gradient.addColorStop(1, '#fecfef');
                        
                        ctx.fillStyle = gradient;
                        ctx.fillRect(blockX, blockY, blockWidth, blockHeight);
                        
                        // ãƒ–ãƒ­ãƒƒã‚¯ã®è©³ç´°
                        ctx.fillStyle = 'rgba(255,255,255,0.3)';
                        ctx.fillRect(blockX + 2, blockY + 2, blockWidth - 4, blockHeight - 4);
                    }
                }
            }
        }
        
        // ã‚²ãƒ¼ãƒ å†é–‹
        function restartGame() {
            document.getElementById('gameOver').style.display = 'none';
            initGame();
        }
        
        // ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢è¡¨ç¤º
        function showStartScreen() {
            document.getElementById('gameOver').style.display = 'none';
            document.getElementById('startScreen').style.display = 'block';
            document.getElementById('gameCanvas').style.display = 'none';
            document.getElementById('gameUI').style.display = 'none';
            
            gameRunning = false;
        }
        
        // æ¤œç´¢æ©Ÿèƒ½
        function filterContent() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            // ã‚²ãƒ¼ãƒ å†…ã®æ¤œç´¢æ©Ÿèƒ½ï¼ˆå¿…è¦ã«å¿œã˜ã¦å®Ÿè£…ï¼‰
        }
    </script>
</body>
</html>
